{% load static ftl wagtailcore_tags navigation_tags wagtail_cache %}{# Icons: https://fonts.google.com/icons #}
{% url "wagtail_serve" "" as home_url %}
{% main_menu as main_menu %}
<header class="white medium-padding medium-elevate indigo-text">
  <nav class="m l" aria-label="main">
    <a href="{{ home_url }}" style="display: inline-flex; gap: 1rem">
      <img src="{% static 'android-chrome-192x192.png' %}" class="extra round" role="presentation">
      <p class="bold" style="font-size: 1.6em; margin: unset">{% ftlmsg "app-project-name" %}</p>
    </a>
    <div class="max">{# spacer #}</div>
    {% wagtailcache timeout navbar_desktop cache_burst %}
      {% for item in main_menu.items %}
        {% if item.subitems %}
        <button class="transparent extra">
          <span><i aria-hidden="true" class="extra">{{ item.icon }}</i> {{ item.title }}</span>
          <menu class="no-wrap">
          {% for subitem in item.subitems %}
            <li>
              <a href="{% pageurl subitem.page.localized %}">
                <i aria-hidden="true">{{ subitem.icon }}</i>
                <span>{% firstof subitem.title subitem.page.localized.title %}</span>
              </a>
            </li>
          {% endfor %}
          </menu>
        </button>
        {% else %}
        <a href="{% pageurl item.page.localized %}" class="button transparent extra">
          <i aria-hidden="true" class="extra">{{ item.icon }}</i>
          <span>{% firstof item.title item.page.localized.title %}</span>
        </a>
        {% endif %}
      {% endfor %}
    {% endwagtailcache %}

    {# language switcher #}
    {% wagtailpagecache timeout lang_desktop %}
    <button class="button transparent extra" aria-label="Other languages">
      <i aria-hidden="true" class="extra">translate</i>
      <menu class="left no-wrap surface-container-lowest">
        <li class="active">{{ page.locale.language_name_localized | capfirst }}</li>
        {% for page_tr in page.get_translations %}
        <li><a href="{% pageurl page_tr %}">{{ page_tr.locale.language_name_local | capfirst }}</a></li>
        {% endfor %}
      </menu>
    </button>
  {% endwagtailpagecache %}

  </nav>

  <nav class="s small" aria-label="main">
    <img src="{% static "android-chrome-192x192.png" %}" class="extra round" role="presentation">
    <p class="bold max" style="font-size: 1.8em">{% ftlmsg "app-project-name" %}</p>
    <button class="transparent large round" aria-label="Open main menu">
      <span><i aria-hidden="true" class="large">menu</i></span>
      <menu class="left no-wrap white">
      {% wagtailcache timeout navbar_mobile cache_burst %}
        {% for item in main_menu.items %}
          {% if item.subitems %}
          {% for subitem in item.subitems %}
            <li>
              <a href="{% pageurl subitem.page.localized %}">
                <i aria-hidden="true">{{ subitem.icon }}</i>
                <span>{% firstof subitem.title subitem.page.localized.title %}</span>
              </a>
            </li>
          {% endfor %}
          {% else %}
          <li>
            <a href="{% pageurl item.page.localized %}"> <i aria-hidden="true">{{ item.icon }}</i> {{ item.title }} </a>
          </li>
          {% endif %}
        {% endfor %}
      {% endwagtailcache %}

    {# language switcher #}
        {% wagtailpagecache timeout lang_mobile %}
        <li class="active text-black"><i aria-hidden="true">translate</i>{{ page.locale.language_name_localized | capfirst }}</li>
        {% for page_tr in page.get_translations %}
        <li><a href="{% pageurl page_tr %}"><i aria-hidden="true">translate</i> {{ page_tr.locale.language_name_local | capfirst }}</a></li>
        {% endfor %}
        {% endwagtailpagecache %}
      </menu>
    </button>
  </nav>

</header>
